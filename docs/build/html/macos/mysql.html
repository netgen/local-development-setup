
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Set up MySQL database server &#8212; Netgen&#39;s Local Development Setup  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="set-up-mysql-database-server">
<h1>Set up MySQL database server<a class="headerlink" href="#set-up-mysql-database-server" title="Permalink to this heading">¶</a></h1>
<p>MySQL is an open-source relational database management system.</p>
<section id="install">
<h2>1 Install<a class="headerlink" href="#install" title="Permalink to this heading">¶</a></h2>
<section id="if-using-macos-with-macports">
<h3>1.1 If using macOS with MacPorts<a class="headerlink" href="#if-using-macos-with-macports" title="Permalink to this heading">¶</a></h3>
<p>Execute on the command line:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo port install mysql8-server</span>
</pre></div>
</div>
<p>Select <code class="docutils literal notranslate"><span class="pre">mysql8</span></code> as your preferred version of MySQL with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo port select mysql mysql8</span>
</pre></div>
</div>
</section>
<section id="if-using-macos-with-homebrew">
<h3>1.2 If using macOS with Homebrew<a class="headerlink" href="#if-using-macos-with-homebrew" title="Permalink to this heading">¶</a></h3>
<p>Execute on the command line:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">brew install mysql</span>
</pre></div>
</div>
</section>
</section>
<section id="start">
<h2>2 Start<a class="headerlink" href="#start" title="Permalink to this heading">¶</a></h2>
<p>Since MySQL is an essential part of our web apps, so we want it always
running and started automatically after a reboot.</p>
<section id="if-using-macos-with-macports-1">
<span id="id1"></span><h3>2.1 If using macOS with MacPorts<a class="headerlink" href="#if-using-macos-with-macports-1" title="Permalink to this heading">¶</a></h3>
<p>First initialize the server by executing on the command line:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo /opt/local/lib/mysql8/bin/mysqld --initialize --user=_mysql</span>
</pre></div>
</div>
<p>Take note of the <code class="docutils literal notranslate"><span class="pre">root</span></code> password generated by the command as you will
need it in the next step.</p>
<p>Now you can start the server with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo port load mysql8-server</span>
</pre></div>
</div>
<p>This will also start the server automatically after a reboot.</p>
<p>To stop the server and prevent it from running after a reboot, execute:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo port unload mysql8-server</span>
</pre></div>
</div>
</section>
<section id="if-using-macos-with-homebrew-1">
<span id="id2"></span><h3>2.2 If using macOS with Homebrew<a class="headerlink" href="#if-using-macos-with-homebrew-1" title="Permalink to this heading">¶</a></h3>
<p>Execute on the command line:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">brew services start mysql</span>
</pre></div>
</div>
<p>This will also start the server automatically after a reboot.</p>
<p>To stop the server and prevent it from running after a reboot, execute:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">brew services stop mysql</span>
</pre></div>
</div>
</section>
</section>
<section id="secure">
<h2>3 Secure<a class="headerlink" href="#secure" title="Permalink to this heading">¶</a></h2>
<section id="run-mysql-secure-installation">
<h3>3.1 Run MySQL secure installation<a class="headerlink" href="#run-mysql-secure-installation" title="Permalink to this heading">¶</a></h3>
<p>Improve the security of the installation by executing the following on
the command line (note: Ubuntu will ask for <code class="docutils literal notranslate"><span class="pre">root</span></code> user’s password):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mysql_secure_installation</span>
</pre></div>
</div>
<p>Follow the instructions to configure <code class="docutils literal notranslate"><span class="pre">root</span></code> as password for the
<code class="docutils literal notranslate"><span class="pre">root</span></code> user. If MySQL was installed using MacPorts, enter the password
generated at the initialization.</p>
<p>Additionally, follow the instructions to:</p>
<ul class="simple">
<li><p>skip setting up VALIDATE PASSWORD component</p></li>
<li><p>remove anonymous users and test databases</p></li>
<li><p>disallow the remote login for <code class="docutils literal notranslate"><span class="pre">root</span></code></p></li>
</ul>
<p>That will be sufficient for local development needs.</p>
</section>
</section>
<section id="configure">
<h2>4 Configure<a class="headerlink" href="#configure" title="Permalink to this heading">¶</a></h2>
<section id="if-using-macos-with-macports-2">
<span id="id3"></span><h3>4.1 If using macOS with MacPorts<a class="headerlink" href="#if-using-macos-with-macports-2" title="Permalink to this heading">¶</a></h3>
<p>Edit file <code class="docutils literal notranslate"><span class="pre">/opt/local/etc/mysql8/my.cnf</span></code>, comment out the line
including the default MacPorts settings and add the following
configuration:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[mysqld]</span><span class="w"></span>
<span class="na">basedir</span><span class="o">=</span><span class="s">&quot;/opt/local&quot;</span><span class="w"></span>
<span class="na">bind-address</span><span class="o">=</span><span class="s">127.0.0.1</span><span class="w"></span>
<span class="na">binlog_expire_logs_seconds</span><span class="o">=</span><span class="s">86400</span><span class="w"></span>
<span class="na">socket</span><span class="o">=</span><span class="s">/opt/local/var/run/mysql/mysqld.sock</span><span class="w"></span>
<span class="na">collation-server</span><span class="o">=</span><span class="s">utf8mb4_unicode_520_ci</span><span class="w"></span>
<span class="na">character-set-server</span><span class="o">=</span><span class="s">utf8mb4</span><span class="w"></span>
<span class="na">init-connect</span><span class="o">=</span><span class="s">&#39;SET NAMES utf8mb4&#39;</span><span class="w"></span>

<span class="k">[client]</span><span class="w"></span>
<span class="na">socket</span><span class="o">=</span><span class="s">/opt/local/var/run/mysql/mysqld.sock</span><span class="w"></span>
<span class="na">default-character-set</span><span class="o">=</span><span class="s">utf8mb4</span><span class="w"></span>

<span class="k">[mysql]</span><span class="w"></span>
<span class="na">default-character-set</span><span class="o">=</span><span class="s">utf8mb4</span><span class="w"></span>
</pre></div>
</div>
<p>Configuring path to the socket file explicitly will be useful if you
need to use multiple versions of MySQL, as you will not need to update
PHP configuration when changing between them. This will also require
creating the directory where the socket file will be placed and setting
up the correct permissions on it:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo mkdir /opt/local/var/run/mysql</span>
<span class="go">sudo chown _mysql:_mysql /opt/local/var/run/mysql</span>
</pre></div>
</div>
<p>Now reload the server with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo port reload mysql8-server</span>
</pre></div>
</div>
</section>
<section id="if-using-macos-with-homebrew-2">
<span id="id4"></span><h3>4.2 If using macOS with Homebrew<a class="headerlink" href="#if-using-macos-with-homebrew-2" title="Permalink to this heading">¶</a></h3>
<p>Edit file <code class="docutils literal notranslate"><span class="pre">/usr/local/etc/my.cnf</span></code> and add the following line in the
<code class="docutils literal notranslate"><span class="pre">[mysqld]</span></code> section:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="na">binlog_expire_logs_seconds</span><span class="o">=</span><span class="s">86400</span><span class="w"></span>
</pre></div>
</div>
<p>Now reload the server by executing on the command line:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo port reload mysql8-server</span>
</pre></div>
</div>
</section>
</section>
<section id="create-admin-user">
<h2>4 Create admin user<a class="headerlink" href="#create-admin-user" title="Permalink to this heading">¶</a></h2>
<p>To avoid MySQL upgrade borking the database access by resetting the
password authentication method, we will create a new user <code class="docutils literal notranslate"><span class="pre">admin</span></code> with
password <code class="docutils literal notranslate"><span class="pre">admin</span></code> which will be used to access the server.</p>
<p>First, log into the server by executing the following on the command
line:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mysql -uroot -p</span>
</pre></div>
</div>
<p>Enter the password <code class="docutils literal notranslate"><span class="pre">root</span></code> when asked. If you set up everything
correctly, you should arrive at the MySQL command-line client. Execute
on the <code class="docutils literal notranslate"><span class="pre">mysql&gt;</span></code> command line:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">CREATE USER &#39;admin&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;admin&#39;;</span>
<span class="go">GRANT ALL PRIVILEGES ON *.* TO &#39;admin&#39;@&#39;localhost&#39;;</span>
<span class="go">FLUSH PRIVILEGES;</span>
</pre></div>
</div>
<p>Now you can exit the MySQL command-line client by typing <code class="docutils literal notranslate"><span class="pre">exit</span></code>.</p>
</section>
<section id="test">
<h2>5 Test<a class="headerlink" href="#test" title="Permalink to this heading">¶</a></h2>
<p>Test that you can use your newly created <code class="docutils literal notranslate"><span class="pre">admin</span></code> user to access the
command line by executing:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mysql -uadmin -p</span>
</pre></div>
</div>
<p>Enter the password <code class="docutils literal notranslate"><span class="pre">admin</span></code> when asked. You should again arrive at the
MySQL command-line client:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 49

Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.

mysql&gt;
</pre></div>
</div>
</section>
<section id="install-a-gui-client">
<h2>6 Install a GUI client<a class="headerlink" href="#install-a-gui-client" title="Permalink to this heading">¶</a></h2>
<p>You will probably also want a graphical UI client to work with the
database server. For macOS, <a class="reference external" href="https://tableplus.com/">TablePlus</a> is a
good choice, offering unlimited free trial with reasonable limitations
for light use.</p>
<p>Install your preferred GUI client and configure the connection to the
server with the <code class="docutils literal notranslate"><span class="pre">admin</span></code> user. If the connection works, you’ve finished
installing and configuring your MySQL server.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Netgen's Local Development Setup</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, Netgen.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/macos/mysql.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>